(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ff35591"],{b7b4:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md6:""}},[n("h2",[t._v("CONSUMO EN AZURE")])])],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-menu",{attrs:{dark:!1,"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[n("v-text-field",{attrs:{slot:"activator",value:t.dateFormated1,label:"Fecha inicial","prepend-icon":"event",clearable:""},slot:"activator"}),n("v-date-picker",{attrs:{reactive:!0},on:{change:t.llenarInformacion,input:function(e){t.menu2=!1}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-menu",{attrs:{dark:!1,"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},model:{value:t.menu1,callback:function(e){t.menu1=e},expression:"menu1"}},[n("v-text-field",{attrs:{slot:"activator",value:t.dateFormated2,label:"Fecha final","prepend-icon":"event",clearable:""},slot:"activator"}),n("v-date-picker",{attrs:{reactive:!0},on:{change:t.llenarInformacion,input:function(e){t.menu1=!1}},model:{value:t.date1,callback:function(e){t.date1=e},expression:"date1"}})],1)],1),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-select",{attrs:{items:t.medidas,label:"Medida",multiple:""},on:{change:t.filtrarData},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item,a=e.index;return[0===a?n("v-chip",[n("span",[t._v(t._s(r))])]):t._e(),1===a?n("span",{staticClass:"grey--text caption"},[t._v("(+"+t._s(t.medidasSeleccionadas.length-1)+" others)")]):t._e()]}}]),model:{value:t.medidasSeleccionadas,callback:function(e){t.medidasSeleccionadas=e},expression:"medidasSeleccionadas"}})],1),n("v-flex",{attrs:{xs12:"",md2:""}},[n("v-select",{attrs:{items:t.tags,label:"Tag",multiple:""},on:{change:t.filtrarData},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item,a=e.index;return[0===a?n("v-chip",[n("span",[t._v(t._s(r))])]):t._e(),1===a?n("span",{staticClass:"grey--text caption"},[t._v("(+"+t._s(t.tagsSeleccionadas.length-1)+" others)")]):t._e()]}}]),model:{value:t.tagsSeleccionadas,callback:function(e){t.tagsSeleccionadas=e},expression:"tagsSeleccionadas"}})],1),n("v-flex",{staticClass:"text-xs-right",attrs:{xs12:"",md4:""}},[n("h3",[t._v(t._s(t._f("toCurrency")(t.mitotal)))]),n("br"),n("label",{staticStyle:{color:"red"}},[t._v("Consumo estimado*")])])],1),n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md8:""}},[n("v-data-table",{staticClass:"elevation-1 via-tabla",attrs:{headers:t.headers,"rows-per-page-items":[60,200,500,{text:"Todos",value:-1}],items:t.desserts},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[t._v(t._s(e.item.instanceData?e.item.instanceData.tags:""))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(t.fechaFormateada(e.item.usageStartTime)))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.resource.name))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.unit))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.quantity))]),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.Costo))])]}}])})],1),n("v-flex",{attrs:{xs12:"",md4:""}},[n("line-chart",{attrs:{mislabels:t.lblMedidas,midata:t.desserts}})],1)],1)],1)},a=[],o=n("c1df"),i=n.n(o),s=n("d531"),u=n("bc3a");const c=Object(s["extendMoment"])(i.a);var l=[],f="https://api.partnercenter.microsoft.com/v1/",d="customers/{{CUSTOMER_ID}}/subscriptions/{{SUBSCRIPTION_ID}}/utilizations/azure?start_time={{START_TIME}}&end_time={{END_TIME}}",v="customers/{{CUSTOMER_ID}}/servicecosts/MostRecent",h=JSON.parse(localStorage.getItem("usuario")),p=JSON.parse(localStorage.getItem("token")),m=h["cliente_id"],y="564835F1-A980-4A48-8A71-00069C06CBF1",g=p["access_token"];c().startOf("month").format("YYYY-MM-DD hh:mm"),c().endOf("month").format("YYYY-MM-DD hh:mm");function x(){for(var t=l,e=[],n=t.length-1;n>=0;n--){var r=t[n],a=r["resource"]["name"],o=0===this.medidasSeleccionadas.length||-1!==this.medidasSeleccionadas.indexOf(a);0===this.tagsSeleccionadas.length||this.tagsSeleccionadas.indexOf(r["tags"]);console.log(o),o&&e.push(r)}var i=[];for(n=e.length-1;n>=0;n--){var s=e[n];a=s["resource"]["name"];-1===i.indexOf(a)&&i.push(a)}return console.log("medidas lbl:::"),console.log(i),this.lblMedidas=i,this.desserts=e,e}function b(t,e,n){for(var r=[],a=t.length-1;a>=0;a--){var o=t[a],i=o[e][n],s=r.indexOf(i);-1===s&&r.push(i)}return r}var S={filtrarData:x,fechaFormateada:function(t){return t?c(t.replace("Z","")).format("DD/MM/YYYY"):""},llenarInformacion:function(){console.log("creating");var t=this,e=(h["margen"]?h["margen"]:0)/100,n="Bearer "+g,r={headers:{Authorization:n}},a=f+v;a=a.replace("{{CUSTOMER_ID}}",m),u.get(a,r).then(function(n){n=n.data;var a=n["billingStartDate"].replace("Z",""),o=n["billingEndDate"].replace("Z",""),i=n["afterTaxTotal"]*e+n["afterTaxTotal"]*e;t.mitotal=i;var s=f+d;s=s.replace("{{CUSTOMER_ID}}",m),s=s.replace("{{SUBSCRIPTION_ID}}",y),s=s.replace("{{START_TIME}}",a),s=s.replace("{{END_TIME}}",o),u.get(s,r).then(e=>{for(var n=e.data.items,r=n.length,a=i/n.length,o=r-1;o>=0;o--)n[o]["Costo"]=a;t.desserts=n,l=t.desserts.slice(0),t.lblMedidas=b(t.desserts,"resource","name").sort(),t.medidas=t.lblMedidas.slice(0),t.filtrarData()}).catch(t=>{console.log("mi error "+t)})})}},O={totalCosto:function(){return 0},dateFormated1:function(){return this.date?c(this.date).format("ll"):""},dateFormated2:function(){return this.date1?c(this.date1).format("ll"):""}},_={date:null,date1:null,menu:!1,menu1:!1,modal:!1,menu2:!1,mitotal:0,medidas:[],medidasSeleccionadas:[],tagsSeleccionadas:[],lblMedidas:[],headers:[{text:"Tag",value:'instanceData["tags"]'},{text:"Fecha",value:"usageStartTime"},{text:"Medida",value:'resource["name"]'},{text:"Unidad de Medida",value:"unit"},{text:"Consumo",value:"quantity"},{text:"Costo",value:"Costo"}],desserts:[]},w={data(){return _},created(){this.llenarInformacion()},computed:O,methods:S},k=w,T=n("2877"),M=Object(T["a"])(k,r,a,!1,null,null,null);M.options.__file="dashboard.vue";e["default"]=M.exports},d531:function(t,e,n){!function(e,r){t.exports=r(n("c1df"))}(0,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";var r=n(5)();t.exports=function(t){return t!==r&&null!==t}},function(t,e,n){"use strict";t.exports=n(18)()?Symbol:n(20)},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t.range=function(e,n){var r=this;return"string"==typeof e&&p.hasOwnProperty(e)?new m(t(r).startOf(e),t(r).endOf(e)):new m(e,n)},t.rangeFromInterval=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t();if(t.isMoment(r)||(r=t(r)),!r.isValid())throw new Error("Invalid date.");var a=r.clone().add(n,e),o=[];return o.push(t.min(r,a)),o.push(t.max(r,a)),new m(o)},t.rangeFromISOString=function(e){var n=s(e),r=t.parseZone(n[0]),a=t.parseZone(n[1]);return new m(r,a)},t.parseZoneRange=t.rangeFromISOString,t.fn.range=t.range,t.range.constructor=m,t.isRange=function(t){return t instanceof m},t.fn.within=function(t){return t.contains(this.toDate())},t}function s(t){return t.split("/")}Object.defineProperty(e,"__esModule",{value:!0}),e.DateRange=void 0;var u=function(){function t(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.extendMoment=i;var f=n(2),d=r(f),v=n(1),h=r(v),p={year:!0,quarter:!0,month:!0,week:!0,day:!0,hour:!0,minute:!0,second:!0},m=e.DateRange=function(){function t(e,n){o(this,t);var r=e,a=n;if(1===arguments.length||void 0===n)if("object"===(void 0===e?"undefined":c(e))&&2===e.length){var i=u(e,2);r=i[0],a=i[1]}else if("string"==typeof e){var l=s(e),f=u(l,2);r=f[0],a=f[1]}this.start=r||0===r?(0,d.default)(r):(0,d.default)(-864e13),this.end=a||0===a?(0,d.default)(a):(0,d.default)(864e13)}return l(t,[{key:"adjacent",value:function(t){var e=this.start.isSame(t.end),n=this.end.isSame(t.start);return e&&t.start.valueOf()<=this.start.valueOf()||n&&t.end.valueOf()>=this.end.valueOf()}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1};return this.overlaps(t,e)?new this.constructor(d.default.min(this.start,t.start),d.default.max(this.end,t.end)):null}},{key:"by",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},n=this;return a({},h.default.iterator,function(){var r=e.step||1,a=Math.abs(n.start.diff(n.end,t))/r,o=e.excludeEnd||!1,i=0;return e.hasOwnProperty("exclusive")&&(o=e.exclusive),{next:function(){var e=n.start.clone().add(i*r,t),s=o?!(i<a):!(i<=a);return i++,{done:s,value:s?void 0:e}}}})}},{key:"byRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeEnd:!1,step:1},n=this,r=e.step||1,o=this.valueOf()/t.valueOf()/r,i=Math.floor(o),s=e.excludeEnd||!1,u=0;return e.hasOwnProperty("exclusive")&&(s=e.exclusive),a({},h.default.iterator,function(){return i===1/0?{done:!0}:{next:function(){var e=(0,d.default)(n.start.valueOf()+t.valueOf()*u*r),a=i===o&&s?!(u<i):!(u<=i);return u++,{done:a,value:a?void 0:e}}}})}},{key:"center",value:function(){var t=this.start.valueOf()+this.diff()/2;return(0,d.default)(t)}},{key:"clone",value:function(){return new this.constructor(this.start.clone(),this.end.clone())}},{key:"contains",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,excludeEnd:!1},r=this.start.valueOf(),a=this.end.valueOf(),o=e.valueOf(),i=e.valueOf(),s=n.excludeStart||!1,u=n.excludeEnd||!1;n.hasOwnProperty("exclusive")&&(s=u=n.exclusive),e instanceof t&&(o=e.start.valueOf(),i=e.end.valueOf());var c=r<o||r<=o&&!s,l=a>i||a>=i&&!u;return c&&l}},{key:"diff",value:function(t,e){return this.end.diff(this.start,t,e)}},{key:"duration",value:function(t,e){return this.diff(t,e)}},{key:"intersect",value:function(t){var e=this.start.valueOf(),n=this.end.valueOf(),r=t.start.valueOf(),a=t.end.valueOf(),o=e==n,i=r==a;if(o){var s=e;if(s==r||s==a)return null;if(s>r&&s<a)return this.clone()}else if(i){var u=r;if(u==e||u==n)return null;if(u>e&&u<n)return new this.constructor(u,u)}return e<=r&&r<n&&n<a?new this.constructor(r,n):r<e&&e<a&&a<=n?new this.constructor(e,a):r<e&&e<=n&&n<a?this.clone():e<=r&&r<=a&&a<=n?new this.constructor(r,a):null}},{key:"isEqual",value:function(t){return this.start.isSame(t.start)&&this.end.isSame(t.end)}},{key:"isSame",value:function(t){return this.isEqual(t)}},{key:"overlaps",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{adjacent:!1},n=null!==this.intersect(t);return e.adjacent&&!n?this.adjacent(t):n}},{key:"reverseBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},n=this;return a({},h.default.iterator,function(){var r=e.step||1,a=Math.abs(n.start.diff(n.end,t))/r,o=e.excludeStart||!1,i=0;return e.hasOwnProperty("exclusive")&&(o=e.exclusive),{next:function(){var e=n.end.clone().subtract(i*r,t),s=o?!(i<a):!(i<=a);return i++,{done:s,value:s?void 0:e}}}})}},{key:"reverseByRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{excludeStart:!1,step:1},n=this,r=e.step||1,o=this.valueOf()/t.valueOf()/r,i=Math.floor(o),s=e.excludeStart||!1,u=0;return e.hasOwnProperty("exclusive")&&(s=e.exclusive),a({},h.default.iterator,function(){return i===1/0?{done:!0}:{next:function(){var e=(0,d.default)(n.end.valueOf()-t.valueOf()*u*r),a=i===o&&s?!(u<i):!(u<=i);return u++,{done:a,value:a?void 0:e}}}})}},{key:"snapTo",value:function(t){var e=this.clone();return e.start.isSame((0,d.default)(-864e13))||(e.start=e.start.startOf(t)),e.end.isSame((0,d.default)(864e13))||(e.end=e.end.endOf(t)),e}},{key:"subtract",value:function(t){var e=this.start.valueOf(),n=this.end.valueOf(),r=t.start.valueOf(),a=t.end.valueOf();return null===this.intersect(t)?[this]:r<=e&&e<n&&n<=a?[]:r<=e&&e<a&&a<n?[new this.constructor(a,n)]:e<r&&r<n&&n<=a?[new this.constructor(e,r)]:e<r&&r<a&&a<n?[new this.constructor(e,r),new this.constructor(a,n)]:e<r&&r<n&&a<n?[new this.constructor(e,r),new this.constructor(r,n)]:[]}},{key:"toDate",value:function(){return[this.start.toDate(),this.end.toDate()]}},{key:"toString",value:function(){return this.start.format()+"/"+this.end.format()}},{key:"valueOf",value:function(){return this.end.valueOf()-this.start.valueOf()}}]),t}()},function(t,e,n){"use strict";var r,a=n(6),o=n(13),i=n(9),s=n(15);r=t.exports=function(t,e){var n,r,i,u,c;return arguments.length<2||"string"!=typeof t?(u=e,e=t,t=null):u=arguments[2],null==t?(n=i=!0,r=!1):(n=s.call(t,"c"),r=s.call(t,"e"),i=s.call(t,"w")),c={value:e,configurable:n,enumerable:r,writable:i},u?a(o(u),c):c},r.gs=function(t,e,n){var r,u,c,l;return"string"!=typeof t?(c=n,n=e,e=t,t=null):c=arguments[3],null==e?e=void 0:i(e)?null==n?n=void 0:i(n)||(c=n,n=void 0):(c=e,e=n=void 0),null==t?(r=!0,u=!1):(r=s.call(t,"c"),u=s.call(t,"e")),l={get:e,set:n,configurable:r,enumerable:u},c?a(o(c),l):l}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";t.exports=n(7)()?Object.assign:n(8)},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(10),a=n(14),o=Math.max;t.exports=function(t,e){var n,i,s,u=o(arguments.length,2);for(t=Object(a(t)),s=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},i=1;i<u;++i)e=arguments[i],r(e).forEach(s);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";t.exports=n(11)()?Object.keys:n(12)},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";var r=n(0),a=Object.keys;t.exports=function(t){return a(r(t)?Object(t):t)}},function(t,e,n){"use strict";var r=n(0),a=Array.prototype.forEach,o=Object.create,i=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=o(null);return a.call(arguments,function(t){r(t)&&i(Object(t),e)}),e}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";t.exports=n(16)()?String.prototype.contains:n(17)},function(t,e,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&!0===r.contains("dwa")&&!1===r.contains("foo")}},function(t,e,n){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return r.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";var r={object:!0,symbol:!0};t.exports=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!r[typeof Symbol.iterator]&&!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag]}},function(t,e,n){"use strict";t.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&"Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag])}},function(t,e,n){"use strict";var r,a,o,i,s=n(4),u=n(21),c=Object.create,l=Object.defineProperties,f=Object.defineProperty,d=Object.prototype,v=c(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),i=!0}catch(t){}}var h=function(){var t=c(null);return function(e){for(var n,r,a=0;t[e+(a||"")];)++a;return e+=a||"",t[e]=!0,n="@@"+e,f(d,n,s.gs(null,function(t){r||(r=!0,f(this,n,s(t)),r=!1)})),n}}();o=function(t){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return a(t)},t.exports=a=function t(e){var n;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return i?r(e):(n=c(o.prototype),e=void 0===e?"":String(e),l(n,{__description__:s("",e),__name__:s("",h(e))}))},l(a,{for:s(function(t){return v[t]?v[t]:v[t]=a(String(t))}),keyFor:s(function(t){var e;for(e in u(t),v)if(v[e]===t)return e}),hasInstance:s("",r&&r.hasInstance||a("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||a("isConcatSpreadable")),iterator:s("",r&&r.iterator||a("iterator")),match:s("",r&&r.match||a("match")),replace:s("",r&&r.replace||a("replace")),search:s("",r&&r.search||a("search")),species:s("",r&&r.species||a("species")),split:s("",r&&r.split||a("split")),toPrimitive:s("",r&&r.toPrimitive||a("toPrimitive")),toStringTag:s("",r&&r.toStringTag||a("toStringTag")),unscopables:s("",r&&r.unscopables||a("unscopables"))}),l(o.prototype,{constructor:s(a),toString:s("",function(){return this.__name__})}),l(a.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),f(a.prototype,a.toPrimitive,s("",function(){var t=u(this);return"symbol"==typeof t?t:t.toString()})),f(a.prototype,a.toStringTag,s("c","Symbol")),f(o.prototype,a.toStringTag,s("c",a.prototype[a.toStringTag])),f(o.prototype,a.toPrimitive,s("c",a.prototype[a.toPrimitive]))},function(t,e,n){"use strict";var r=n(19);t.exports=function(t){if(!r(t))throw new TypeError(t+" is not a symbol");return t}}])})}}]);
//# sourceMappingURL=chunk-4ff35591.ce487abc.js.map